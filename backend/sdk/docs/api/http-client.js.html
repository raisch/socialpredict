<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: http-client.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: http-client.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import axios from 'axios'
import { SocialPredictError } from './errors.js'

/**
 * Base HTTP client for SocialPredict API
 * Handles authentication, request/response processing, and error handling
 */
export class HttpClient {
  /**
   * Create an HTTP client instance
   * @param {string} baseURL - Base URL for the API
   * @param {Object} options - Configuration options
   * @param {string} options.token - JWT token for authentication
   * @param {number} options.timeout - Request timeout in milliseconds
   * @param {Object} options.headers - Additional headers
   */
  constructor (baseURL, options = {}) {
    this.baseURL = baseURL
    this.token = options.token || null

    this.client = axios.create({
      baseURL,
      timeout: options.timeout || 10000,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers
      }
    })

    // Add request interceptor for authentication
    this.client.interceptors.request.use(
      config => {
        if (this.token &amp;&amp; !config.headers.Authorization) {
          config.headers.Authorization = `Bearer ${this.token}`
        }
        return config
      },
      error => Promise.reject(error)
    )

    // Add response interceptor for error handling
    this.client.interceptors.response.use(
      response => response,
      error => {
        if (error.response) {
          // Server responded with error status
          const { status, data } = error.response
          throw new SocialPredictError(
            data.message || `HTTP ${status} Error`,
            status,
            data.error || 'API_ERROR',
            data
          )
        } else if (error.request || error.code === 'ECONNABORTED' || error.message === 'Network Error') {
          // Network error (covers axios-mock-adapter networkError() case)
          throw new SocialPredictError(
            'Network error - unable to reach server',
            0,
            'NETWORK_ERROR'
          )
        } else {
          // Other error
          throw new SocialPredictError(
            error.message || 'Unexpected error',
            0,
            'UNKNOWN_ERROR'
          )
        }
      }
    )
  }

  /**
   * Set authentication token
   * @param {string} token - JWT token
   */
  setToken (token) {
    this.token = token
  }

  /**
   * Clear authentication token
   */
  clearToken () {
    this.token = null
  }

  /**
   * Make a GET request
   * @param {string} path - Request path
   * @param {Object} params - Query parameters
   * @returns {Promise&lt;Object>} Response data
   */
  async get (path, params = {}) {
    const response = await this.client.get(path, { params })
    return response.data
  }

  /**
   * Make a POST request
   * @param {string} path - Request path
   * @param {Object} data - Request body data
   * @returns {Promise&lt;Object>} Response data
   */
  async post (path, data = {}) {
    const response = await this.client.post(path, data)
    return response.data
  }

  /**
   * Make a PUT request
   * @param {string} path - Request path
   * @param {Object} data - Request body data
   * @returns {Promise&lt;Object>} Response data
   */
  async put (path, data = {}) {
    const response = await this.client.put(path, data)
    return response.data
  }

  /**
   * Make a PATCH request
   * @param {string} path - Request path
   * @param {Object} data - Request body data
   * @returns {Promise&lt;Object>} Response data
   */
  async patch (path, data = {}) {
    const response = await this.client.patch(path, data)
    return response.data
  }

  /**
   * Make a DELETE request
   * @param {string} path - Request path
   * @returns {Promise&lt;Object>} Response data
   */
  async delete (path) {
    const response = await this.client.delete(path)
    return response.data
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AdminResource.html">AdminResource</a></li><li><a href="AuthResource.html">AuthResource</a></li><li><a href="BaseResource.html">BaseResource</a></li><li><a href="BettingResource.html">BettingResource</a></li><li><a href="ConfigResource.html">ConfigResource</a></li><li><a href="HttpClient.html">HttpClient</a></li><li><a href="MarketsResource.html">MarketsResource</a></li><li><a href="SocialPredictClient.html">SocialPredictClient</a></li><li><a href="SocialPredictError.html">SocialPredictError</a></li><li><a href="UsersResource.html">UsersResource</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Oct 07 2025 10:20:50 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
